An Intelligent Spelling Framework Based on Brain-Computer Interface
Yosra N Abdula1, S Abdel-Mageid2, RA Ramadan3, Afaf A Nada1, Marwa A.Elshahed1,
Sarah N Abdulkader4
1
Physics Department, Faculty of Women for Arets, Science, and Education. Ain Shams
University. Cairo. Egypt.
2
System Engineering and Computer Department, Faculty of Engineering. Al-azhar University.
Cairo. Egypt.
3
Computer Engineering Department, Faculty of Engineering. Cairo University. Giza. Egypt.
4
Computer Science Department, Faculty of Computer and Information System. Helwan
University. Cairo. Egypt.
Abstract:
Brain-computer Interface (BCI) aims to enhance the quality of life for all humans.
Spelling is one of BCI applications that is used to type numbers, characters, words,
or sentences by recording the user's brain activity. In this paper, A BCI speller
framework based on converting mental activity is presented. Such framework uses
Independent Component Analysis (ICA) and Auto Regressive (AR) for
preprocessing and feature extraction respectively. Both of Support Vector Machine
(SVM) and K-Nearest Neighbors (KNN) are utilized at the classification phase.
Several experiments have been conducted by four subjects using the pre-described
framework achieved high average accuracy of 94.38% for KNN with value of K=9.
The performance results have shown that converting mental activity can be used as a
mean for spelling applications.
Keywords:
Brain-Computer Interface, Event Related Potentials (ERP), Steady State Evoked
Potential (SSEP), and Motor Imagery (MI), mental speller.
1-Introduction:
The Brain Computer Interface (BCI) is building an interface between human brain
and outside world. BCI is a controlled system that records the brain signal of user
responses and converts it into new artificial outputs that act on environment or on
the body itself without any dependence on peripheral nerves and muscles. It does not
require any external device or muscle intervention to issue commands and complete
the interaction (NAGY, POPENTIU, & Tarca, 2014)(Valeriani, Poli, & Cinel,
2017).BCIs offered great benefits in providing alternative communication tools for
persons suffering from motor disabilities such as Amyotrophic Lateral Sclerosis
(ALS), spinal cord injuries or brain paralysis, and to enhance functions in healthy
individual (Mora-Cortes, Manyakov, Chumerin, & Van Hulle, 2014).
There are many non-invasive techniques for measuring brain responses such as
Magnetoencephalogram (MEG), Functional Near Infrared Spectroscopy (FNIRS),
Electrocorticogram (ECoG), Functional Magnetic Resonance Imaging (FMRI), and

electroencephalography (EEG). Each technique has some advantages and
disadvantages compared to other techniques. For instance, in EEG the temporal
resolution is high but the special resolution is low compared to FMRI.
____________________________________________________________________
Yosra N Abdula (yosra.nabeel@gmail.com)

The low cost and portability of EEG made it widly used in both clinical and research
applications (Amiri, Rabbi, Azinfar, & others, 2013)(Kaur & Singh, 2017).
The Electroencephalographic (EEG) technique can measure the desired activities of
the brain in a particular area from cortex and used to do numerous applications, for
example, controlled mobile robots, immersion and interaction with virtual reality,
user state monitoring, and brain-control of prosthetic extremity devices in people
with paralysis (Han & Kim, 2016).
There are different features which can be extracted from EEG that can be applied as
input for BCI system, for example, six brain rhythms can be noticed in EEG based
on various frequency domain; delta (up to 4 Hz), theta (4-7 Hz), alpha (8-12 Hz), mu
(8-13 Hz), beta (12-30 Hz), and gamma (25-100 Hz). The delta and theta rhythms
occur in a sleeping, continuous attention, and high emotional conditions. The alpha
rhythm happens when eyes closed at relaxation and wake up. The beta rhythm
appears in open eyes at the normal wake up. The gamma rhythm can be acquired
from somatosensory cortex and mu rhythm from sensorimotor cortex that shows the
rest state of motor neurons (Mühl, Allison, Nijholt, & Chanel, 2014)(Pathak &
Jayanthy, 2017).
A great application of BCI is spelling application (which are systems allowing users
to type individual characters, words, or even sentences by decoding their brain
activity). The spelling application helps to improve the quality of lives for either
people who has speaks difficulties or normal people looking for a more easy life
(Naz & Bawane, 2016).
The researchers of EEG-based Brain-Computer Interface (BCI) speller application
have increased from 2007 until now meaning that it is an active research
area(Hwang, Kim, Choi, & Im, 2013). They used several paradigms that are either
visual or auditory based according to the stimulus that the subject is exposed to.
These speller systems require standing all the time in front of a monitor or near to
speaker devices for selecting the desired character in one or many steps.
In this paper, an intelligent mental spelling framework is proposed to detect the
character thought of by the subjects in one-step by imagining the writing behavior of
the character that want to spell. It uses K-Nearest Neighbors (KNN) for
classification as it gives high performance accuracy compared to Support Vector
Machines (SVM).

This paper is organized as follows. In section 2, the existing works of EEG-based
BCI speller paradigms are presented while the proposed framework is described in
section 3. The conducted experiments and results are presented in section 4.
Conclusion is introduced in section 5.
2-Related Work:
All systems of spelling that are based on EEG-based BCI paradigm, depend on
different types of brain reactions due to the user intentions: Event Related Potentials
(ERP), Steady State Evoked Potential (SSEP), and Motor Imagery (MI)(Cecotti,
2011) .
2.1 Event Related Potentials (ERP):
Event Related Potentials (ERP) are change in EEG potential occur after the presence
of source of stimulus (auditory or visual stimulus) (GLAYAN, 2014)(Yoon & Kim,
2017). P300 is one of the most important components of an ERP. P300 means a
positive peak (deflection in voltage) at about 300 ms to 500 ms after a significant
stimulus onset in the EEG (Cecotti, 2010)(Krigolson, Williams, & Colino, 2017).
2.1.1 Visual P300 Speller
Row/Column (RC) paradigm designed in 1988 by Farwell and Donchin is the most
common used P300-based BCI device in spelling application. In this paradigm, all
the alphabet " 26 letters " and 10 digits from 0 to 9 are arranged in a matrix of 6 × 6
,that can be seen on the screen of the computer as shown in figure (1-a)(Fazel-Rezai,
2009).Each row and column is flashed in a randomly order as described in (FazelRezai et al., 2012)(Mainsah, Collins, Reeves, & Throckmorton, 2017).

(a)

(b)

(c)

(d)

(e)

(f)

Figure 1: (a) row/column (RC) paradigm, (b)single character (SC) paradigm,(c) Checkerboard
(CB) paradigm, (d) seven Region Based (RB) paradigm,(e) six Region Based (RB)
paradigm,(f)auditory P300 speller paradigm

Elsawy et al, use RC paradigm to compare the execution of the suggest ensemble
classifier to the execution of traditional classifier and feature extraction techniques.
This study uses the common average reference spatial filter for preprocessing,
Principal Components Analysis PCA for feature extraction, and finally Linear
Discriminant Analysis (LDA) and Fisher Linear Discriminant (FLD) for
classification. The average classification accuracy for all ensemble classifier
methods was 86.29(Elsawy, Eldawlatly, Taher, & Aly, 2014). Kamp et al, asked six
healthy participants to type all characters by RC paradigm this work uses a Principal
Components Analysis PCA for feature extraction and a Stepwise Linear
Discriminant Analysis (SWLDA) as classification method. The online accuracy of
classification was between 35% and 76% (Kamp, Murphy, & Donchin, 2013).
Bhatnagar et al, used SVM as classifier method for data of two subject to get
accuracy about 92.5% after 15 trials after remove noise by band-pass filter
(Bhatnagar, Yede, Keram, & Chaurasiya, 2016).
The single character (SC) speller flashes randomly one character at a time, with
small tardiness time between flashes as in figure (1-b). The RC speller has a lower
tardiness time between flashes than the SC(Gavett, Wygant, Amiri, & Fazel-Rezai,
2012).Guger et al. asked 100 subjects to spell a 5-character of word "water" with
training of 5 min, this work use Linear Discriminant Analysis (LDA) for
classification. The average classification accuracy of all subjects was 91.0% in (RC)
and 82.0 % in (SC), and the average Classification accuracy of 19 subjects who
participated in RC and SC was 85.3 % and 77.9% respectively after remove noise by
band-pass filter (Guger et al., 2009).
The Checkerboard (CB) paradigm shown stimuli in an 8 × 9 matrix as shown in
Figure (1-c left), a virtual CB contain of the 72 components in the matrix (invisible
to subjects)as in figure (1-c middle),and the subjects see the standard 8 × 9 matrix as
in figure (1-c right). The flashes mechanism is described in (Fazel-Rezai et al.,
2012).C.-C. Postelnicu et al, they asked 10 subject to spell a 16-character of text
“VERY_S IMPLE_TEST” then comparing the execution of (CBP) and HCBP-based
spellers. The average classification accuracy of CBP was 91.25% and for HCBP was
90.625 % using Linear Discriminant Analysis (LDA) after enhance signal by bandpass filtered between 0.5 – 30 Hz(Postelnicu & Talaba, 2013). Townsend, G., et al,
they asked 18 subject to spell a „„WADSWORTH” by using the (CBP) and (RCP)
spellers then comparing the results. The signal filtered by a 0.1 Hz high-pass ,30 Hz
low-pass filter, and classify using Linear discriminant analysis (LDA) to get the
average classification accuracy of CBP was 91.52% and for RCP was 77.34%, the
test done with three-advanced ALS participants produced similar results. These
results show that the CBP has more effective BCI than the RCP. This is especially
important for people with severe neuromuscular disabilities(Fazel-Rezai & Ahmad,
2011). Ryan et al, apply different kind of color stimuli, high-pass filtered at 0.5 Hz,
low-pass filtered at 30 Hz, and the stepwise linear discriminate analysis (SWLDA)
to improve the accuracy (Ryan, Townsend, Gates, Colwell, & Sellers, 2017).
Region Based (RB) paradigm is about six groups of characters arranged in six
different regions as in figure (1-e). works in two steps described in (Fazel-Rezai et
al., 2012).If the number of characters increased the number of regions will be
increased as in figure(1-d),and also It is work in two steps described in (Townsend
et al., 2010).Li, Qi, et al, they compare the performance of (SD) and (RB) paradigm

spellers. Five subjects was participated the experiment the result was that SD-Speller
is superior to RB-Speller when the ISI was set 150ms using Support Vector Machine
(SVM) classifier after a series of processing such as filter, down sampling, artifact
rejection, ocular artifact rejection and epoch (Li et al., 2015). Ikegami et al. asked
seven patients with ALS to spell six characters. So, the average online accuracy of
the ALS patients was 24% for the RC and 55% for the RG, and two of seven
patients after additional experience their average accuracy jump to 92%(Ikegami,
Takano, Kondo, Saeki, & Kansaku, 2014) . Okahara et al, study the performance of
this paradigm in nine patients with SCA to show that the accuracy reach good
results 82.9% after the signals analyses by downsampled to 21 Hz and classified by
Fisher‟s linear discriminant analysis(FDA) (Okahara et al., 2017).
Table (1): Comparison of P300 based visual stimulus paradigms.
PARADIGM

Advantage

Disadvantage

Row/Column
(RC)

Single Character
(SC)

The best choice
paradigm for
spelling

Lower target
probability.

perceptual errors
can be raises

Tardiness time
was Long.

Checkerboard
(CB)
double flash and
adjacency
problems errors
can be cancelled
crowding effect

Region Based
(RB)
decresed spatial
crowding effect
two step to select
character

2.1.2 Auditory P300 Speller
In auditory P300 speller 5*5, visual matrix used as supported matrix as shown in
figure (1-f), with auditory stimulus code represented at each row and column instead
of flashes described in (Kim, Lee, Park, Kim, & Im, 2012).The stimulus time 450
ms and ISI 175 ms were larger in auditory than visual P300 speller. Furdea et al.
want to compare the performance of 13 participants when they use visual and
auditory P300 speller paradigm, by using the notch filter to remove noise and the
stepwise linear discriminant analysis (SWLDA) method as classifier. The high
average classification accuracy achieved at visual speller 94.6% than auditory
speller 65% (Furdea et al., 2009).M. Chang et al. also compare between them and
get high average classification accuracy achieved at visual speller(Chang et al.,
2013). Baykara apply animal sounds as auditory stimulus for 16 healthy subjects to
spell different words, the average online accuracy reach ≥70% for only 81% of the
subjects by using linear discrimination analysis (LDA) as classification method
(Baykara et al., 2016).
2.2 Steady State Evoked Potential (SSEP)
Steady State Evoked Potential can classify in two categories according to stimulus
type;

2.2.1 Steady State Visually Evoked Potential (SSVEP) is an EEG signal of brain
response by a visual stimulus, flickering at specific frequencies ranging from 6HZ to
100HZ ,so the same frequency or multiples of frequency of the visual stimulus
generate the electrical activity (Dutta & Sambandan, 2015)(Mah, 2017).
The SSVEP based Bremen-BCI speller has graphical user interface that presented in
Figure (2-a). This interface system is described in (Valbuena, Sugiarto, & Gräser,
2008).

(a)

(b)

(c)

(d)

Figure 2: (a) Bremen-BCI interface, (b) Graphical user interface (GUI), (c) A modified
QWERTY keyboard layout,(d)ASSR Paradigm.
Wu et al, show the feasibility of the proposed SSVEP BCI at different viewing
distances (60cm, 150cm, 250cm and 350cm) between the user and the visual
stimulator, by 10 healthy subjects participated in the experiment. The average
classification accuracy is over 75% after using band-pass filter by 1-50Hz , Fast
Fourier Transform (FFT) as feature extraction method ,and Canonical Correlation
Analysis (CCA) as classification method (C.-H. Wu & Lakany, 2015).
Graphical user interface (GUI) layout, the letters are appears in a several manner and
the commands will be increased as shown in figure (2-b), The selection of one of the
commands is described in (Kick & Volosyak, 2014). Kick et al ,Asked 38 subjects
to spell the words “BCI” and “BRAIN” and sentence" THE FIVE BOXING
WIZARDS JUMP QUICKLY”, using two layout (Bremen-BCI speller, graphical
user interfaces (GUI)) with three different predefined stimulus frequency sets. The
result demonstrate that 71% of subject tend to work on (GUI) because they needs
only two commands to select symbol in contrast to Bremen-BCI speller that need
more than two commands. The band pass filter between 2 and 30 Hz and a notch
filter around 50 Hz were used (Kick & Volosyak, 2014).
A modified QWERTY keyboard layout was designed to achieved the suggest
spelling system, as shown in Figure (2-c). In this system, the users can spell one
target character per each target selection, in contrast the traditional SSVEP-based
spelling systems (Hwang et al., 2012). Won et al, this study asked 4 subject to test
modified QWERTY keyboard layout with different frequency stimuli range
from
(low (6-14.7Hz)to high (26- 34.7Hz)).The result show that
higher
average
classification accuracy was 80% at the high frequency stimuli compare to the results

achieved at low frequency stimuli. Fast Fourier Transform (FFT) used as feature
extraction method ,and Canonical Correlation Analysis (CCA) apply as
classification method (Won, Zhang, Guan, & Lee, 2014).
2.2.2 Steady State Auditory Evoked Potential (SSAEP) is an EEG signal of brain
response by an auditory stimulus; it also called auditory steady state response
(ASSR). In this paradigm two speaker are located at certain distant from each other
and from person who do the experiment as shown in figure(2-d),the participants
expose to auditory stimulus with different frequency from each speaker as described
in(Kim et al., 2012). Kim et al, asked 6 subject to close their eyes and attention to
auditory stimulus from each speaker. The offline experiments, the average
classification accuracy was 86.33%,and the online experiments was lower
classification accuracy (71.4%) by using Fast Fourier Transform (FFT) as feature
extraction method and a 10-fold cross-validation as classification method (Kim et
al., 2011).
2.3- Motor Imagery (MI)
A motor imagery (MI) BCI is defined as a mental representation of the motor action
with absence the real motor output. It is known that the mental imagination of
movements include the same brain regions (Pfurtscheller & Neuper, 2001). In the
EEG spectra, the power of the (ERD) in the band of beta (13–26 Hz) and mu (8–13
Hz) has been decreased when the subject move or imagine to move(Mora-Cortes et
al., 2014).
A predictive BCI speller based on motor imagery suggested at AIRLab. The GUI of
this speller is presented in Figure (3-a). The selection strategy is based on target
expansions described in (Cecotti, 2010).
D'albis et al , asked three subjects to write the phrase “what a wonderful day" using
a BCI spelling application based on motor imagery. The spelling rate was 3
char/min, 2.7 char/min, and 2 char/min respectively after using Spatial Filtering to
enhance the signal, Genetic algorithm (GA) and Fisher Discriminant Analysis
(FDA) as feature extraction, and finally the classification stage applies linear
discriminant analysis (LDA) (D‟albis, Blatt, Tedesco, Sbattella, & Matteucci, 2012).

(a)

(b)

Figure 3: (a) predictive BCI speller, (b) Hex-o-spell GUI.

Berlin BCI (BBCI) speller based on motor imagery (called Hex-o-Spell) has been
proposed at the BCI research group from the Fraunhofer FIRST (IDA), as shown in
figure (3-b), and works described in (Cecotti, 2011).
On two days in the course of the CeBIT fair 2006 in Hanover, Germany, two
subjects Use hex-o-spell paradigm. The typing speed include the typing mistakes
that corrected using backspace was between 2.3 and 5(CPM) for one subject and
between 4.6 and 7 (CPM) for the other subject (Blankertz et al., 2006; Williamson,
Murray-Smith, Blankertz, Krauledat, & Müller, 2009). K.-R. Muller et al (2008), six
subjects who all had no or very little experience with BCI asked to use Hex-o-Spell
text entry system so, the average classification accuracy was 89.5% after apply
spatial filters as feature extraction and linear discriminant analysis (LDA) as
classification(Müller et al., 2008). Cao et al, modified Hex-o-Spell to Oct-o-Spell to
achieve 92.13% accuracy during spelling Chinese words by 3 subjects using Support
Vector Machine (SVM) for classification stage (Cao et al., 2017).
We can summarize the results of the previous speller paradigms in table 2 shown below.
Table (2): The summary results of the speller paradigm.
Brain Reaction Types

ERP

Type of stimulus

Speller paradigm

Visual P300

RC (Elsawy et al., 2014)
RC (Kamp et al., 2013)
RC (Bhatnagar et al., 2016)
RC (Guger et al., 2009)
SC (Guger et al., 2009)
CBP (Postelnicu & Talaba, 2013)
CBP (Fazel-Rezai & Ahmad, 2011)
RC (Fazel-Rezai & Ahmad, 2011)
RB (Ikegami et al., 2014)
RC (Ikegami et al., 2014)
Visual speller(Furdea et al., 2009)

Auditory P300

SSEP

SSVEP

SSAEP
MI

Visual

(Furdea et al., 2009)
- Bremen BCI speller (C.-H. Wu
& Lakany, 2015)
- Graphical User Interface (GUI)
(Kick & Volosyak, 2014)
- Modified QWERTY
keyboard(Won et al., 2014)
(Kim et al., 2011)
Predictive BCI speller (D‟albis
et al., 2012)
Hex-o-spell (Müller et al., 2008)

Accuracy
86.29%
35% 76%
92.5%
91%
82%
91.25%
91.52%
77.34%
24%
55%
94.6%
65%
75%
71%

80%
86.33%
3cpm

89.5%

In the next section, the proposed speller system with imagined writing character on a
single trial basis is described.

3 -The Proposed Imagined Mental Writing Framework
The mental speller detects the character thought of by the participants as shown in
Error! Reference source not found. Their recorded EEG signals go through
preprocessing, feature extraction, and classification to perform the character
recognition process.

Figure (4): Proposed BCI based speller system.
More details about the involved algorithms in each phase are shown below;
3.1 Preprocessing
The preprocessing signals aims to improve signal to noise ratio (SNR) and enhance
signals by remove the noise from signals. One of methods that used to do this is
Independent Component Analysis (ICA).
Independent Component Analysis (ICA) is statistical method especially in order to
solve the blind source separation (BSS) problem, used to modify the captured
signals from each subject (Hyvärinen, Karhunen, & Oja, 2004; Stone, 2004), which
no need to previous knowledge on the types of the activity or artifact that generate
the EEG signals. So, it has ability to divide the composite signals to its original
source. The formula that represents the relation between the EEG signal 𝑥(𝑡) and its
source 𝑠(𝑡) is;
𝑥 𝑡 = 𝑓 𝑠 𝑡

+ 𝑛 𝑡

(3-1)

Where 𝑛(𝑡) is an additive random noisy vector and 𝑓 is any unknown mixer
function.The number of sources usually affects the input vector‟s s(t)dimension.
Data channels that are measured are equal to the output vector‟s x(t)
dimension(Lee, Lewicki, Girolami, & Sejnowski, 1999).ICA is divided into
different models according to f that be either nonlinear function which is so difficult
in evaluation or linear function which is easier
and specially in brain signal
applications , the mathematical formula explain in the following function;

𝑥(𝑡) = 𝐴𝑠(𝑡) + 𝑛(𝑡)
(3-2)
where A is the mixing matrix. If the noise is weak, we can neglect the noise term
from equation (3-2)(Castellanos & Makarov, 2006).at the end the Infomax or further
modification of the Infomax algorithms used to get 𝐴 and 𝑠(𝑡) from𝑥(𝑡)(Bell &
Sejnowski, 1995)(Lee, Girolami, & Sejnowski, 1999).
It has many advantages as facilitate EEG source localization, limitation artifacts,
and improve Signal to Noise Ratio (SNR) (Allison, Dunne, Leeb, Millán, & Nijholt,
2012). In this system, ICA works as spatial filtering, because the dimensionality of
the output signals is the same as the input. And used the baseline correction as
demonstrates (Hu, Xiao, Zhang, Mouraux, & Iannetti, 2014).
3.2 Feature Extraction
Auto Regressive (AR) modeling features are been used to distinguish the
contributing signals where the prediction for each value relies on the previous values
of the same time series. AR of order six has been calculated using burg method
(BURG, 1975).
It is used to get the filter coefficients that work as features of the signal. Transfer
function of AR filter depends only on poles of denominator. Their numbers decide
the order of the autoregressive model(Nicolas Alonso & Gomez Gil, 2012).

EEG signal y(t)can represent by AR of order p in the following equation;
𝑦 𝑡 = 𝑎1 𝑦 𝑡 − 1 + 𝑎 2 𝑦 𝑡 − 2 +. . +𝑎𝑝 𝑦 𝑡 − 𝑝 + 𝑛(𝑡) (3-3)
Where n(t) is the noise, and ai is the filter coefficient that can calculated by
different methods like the forward-backward, Yule-Walker, Burg, and covariance.
After that we evaluate the power spectrum of the EEG signal y(ω) from this
equation;
𝑦 𝜔 =

1
𝑝
1− 𝑘=1 𝑎 𝑘 𝑒 𝑖𝑘𝜔

(3-4)

The order p of the input signal has been estimated. There are two cases, if it high the
peaks appear in the spectrum not real, else, if it low the spectrum was smooth.
The AR disadvantage is the bad effective performance at non stationary EEG
signals, to eliminate this the multivariate adaptive AR (MVAAR) has been used.
EEG signal yk= [yk,1 yk,2 …..yk,m]T can represent by (MVAAR) of order p in the
following equation;

𝑦𝑘 =𝐴1 𝑦𝑘−1 + 𝐴2 𝑦𝑘−2 + ⋯ + 𝐴𝑝 𝑦𝑘−𝑝 + 𝑛𝑘

(3-5)

Where m is the number of channel, and A1 … . Ap are the adaptive coefficients,
which get by update the coefficient used the Recursive Least Squares algorithm.
3.3- Classification:
Two main types of mental speller classifiers have been studied, named as Support
Vector Machines (SVM) and K Nearest Neighbors (KNN) method.
3.3.1 Support Vector Machine

SVM is a supervised classification method as LDA. It is used to separate feature
vectors into distinct classes via selecting a discriminant hyperplane. This hyperplane
maximize the margins which identify the distance between the nearest training data
and hyperplane (W. Wu, Gao, Hong, & Gao, 2008). It is defined by the support
vectors which resides on the margin as shown in figure (5)(Jakkula, 2006);

Figure (5): Representation of Hyper planes.

Let the following equation define the function of the discriminant hyperplane for the
training data.
𝑓 𝑥 = 𝑠𝑖𝑔𝑛 𝑤, 𝑥 + 𝑏 =

+1 𝑖𝑓 𝑥 𝑖𝑠 𝑎 𝑝𝑜𝑠𝑖𝑡𝑖𝑣𝑒 𝑠𝑎𝑚𝑝𝑙𝑒
−1 𝑖𝑓 𝑥 𝑖𝑠 𝑎 𝑛𝑒𝑔𝑎𝑡𝑖𝑣𝑒 𝑠𝑎𝑚𝑝𝑙𝑒

(3-6)

Where 𝑥, 𝑤 is the input vector and weight respectively. According to the sign of the equation's
result, the mapping of the input data to its classes is determined.
3.3.2 K-Nearest Neighbors
KNN is a classifier method that makes use a set of labeled objects. It distribute the
features into different classes, according to the metric distance (k) among the test
feature vector and the feature of classes nearest (nearest neighbors).

KNN starts by calculate the weighting function that increases by decreases the
metric distance between the neighbor and the feature vector from next
equation(Denœux, 2008);

w

i

d k −d i

=
1

d k −d i
k

if d

(1)

if d k ≠ d 1

(3-7)

=d

where, d(i) is the distance
between the test feature vector and the i-th nearest
(k)
neighbor and, d
represent
the furthest neighbor while d(1) is the nearest
neighbor. In KNN, the decision rule used to add the unknown feature to class that
has greatest sum of weights between its k nearest neighbors(* & Gomez-Gil, 2012).
There are many advantage of KNN classification method, as its easy to understand,
and implemented. But sometimes it shows sensitivity to the feature vector
dimensionality. However, this drawback can be overcome by efficient selection of
the feature and reduction algorithms(Lotte, Congedo, Lécuyer, Lamarche, &
Arnaldi, 2007).
4-Experiments and Results
4.1 Data set
In order to study the performance of the pre-described system, four healthy subjects,
one male and three females aged from twenty to thirty-nine, attended the
experiment. EEG signal has been recorded using an EMOTIV device(n.d.) with
fourteen channels. The channels, distributed according to international 10-20
system, are AF3, F7, F3, FC5, T7, P7, O1, O2, P8, T8, FC6, F4, F8, and AF4 as
shown in figure(6).

Figure (6): Electrode placement on the scalp.

During the training phase, the subjects are stimulated using an auditory cue. It
instructs the user to recall the character to be mentally spelled. The experiment
consists of ten sessions. Each session is composed of twenty trials.
As shown in figure (7), the experiment starts with a baseline period of six seconds
followed by the twenty trials of writing imagination activity. Each trial consumes
four seconds, one second for presenting the acoustic cue and three seconds for
measuring the signals generated from the mental writing activity.

Figure (7): Experiment Description

4-2 Experimental Results
The obtained results are using a 10-fold cross-validation. The performance
evaluation and enhancement is targeting the increase of Correct Classification Rate
(CCR). The character recognition time per subject is also viewed including the time
of signal recording. The results in figure (8) show that using SVM classifier has
achieved an average CCR of only 11.6%. KNN on the other hand has achieved a
CCR of 82.5% when only the vote from one neighbor is considered. Increasing the
number of voters positively affects the average results. This can be seen when k
grows to 3, 5, 7, and 9. Their classification results moves to 87.3%, 90%, 92.8%,
and 94.3% respectively.
The detailed results of each classification method are viewed in Table . The details
of the time consumed in the character detection process, measured in seconds, are
shown in Error! Reference source not found..
Table (3): The detailed results of each classification method

User
1
2
3
4
Average

SVM
0.105
0.1
0.125
0.135
0.11625

1-NN
0.825
0.83
0.885
0.865
0.85125

Average Performance rate
3-NN
5-NN
7-NN
0.87
0.91
0.93
0.845
0.885
0.935
0.895
0.91
0.915
0.885
0.895
0.935
0.87375
0.9
0.92875

9-NN
0.945
0.935
0.935
0.96
0.94375

Table (4): The details of the time consumed in the character detection process, measured
in seconds

User
1
2
3
4
Average

SVM
3.511817
3.279765
3.102314
3.192092
3.271497

Average total character recognition time(sec)
1-NN
3-NN
5-NN
7-NN
3.50932
3.508696
3.508696
3.508696
3.277347
3.276879
3.276489
3.276723
3.10013
3.099116
3.099194
3.09935
3.189908
3.18905
3.189128
3.188972
3.269176
3.268435
3.268377
3.268435

9-NN
3.508618
3.276957
3.09896
3.188972
3.268377

1
0.8
S1

0.6

S2
0.4

S3

0.2

S4

0
SVM

1-NN

3-NN

5-NN

7-NN

9-NN

Figure (8): Total CCR of SVM, KNN for different Ks
The results have shown the efficiency of mental speller with imagined writing
activity. The system has achieved good results in both performance accuracy and
character recognition time. The accuracy results get better when higher values for K
are deployed. They also indicate that the proposed framework gives high accuracy
while requiring fewer assistive tools compared to other BCI speller paradigm. This
makes it more suitable to people with various types of disabilities to spell their
thoughts.
5. Conclusion
Brain-Computer Interface (BCI) is an interface that allows direct communication
path between central nervous system and external devices without relying on the
peripheral nerves. Spelling still remains as one of the main challenges in BCI

applications. Writing a simple message, an e-mail... remains a difficult task to
achieve for people with severe disabilities.
In this paper, a survey of EEG-based BCI speller paradigms that based on one type
of brain activity has been presented. They include their designs, advantages, and
disadvantages.
This paper also proposed a system for mental spelling application. It uses ICA and
baseline correction for preprocessing, AR for feature extraction, and the 9NN for
classification, to get high accuracy classification for our new mental speller system
to spell numbers from 0 to 9 by thinking of them.
In the future work, we will focus on going to type the letters and sentence by new
mental speller design.
Reference
L. F. N.-A., & Gomez-Gil, J. Brain Computer Interfaces, a Review. sensors, 1211–1279.
(2012).
Allison, B. Z., Dunne, S., Leeb, R., Millán, J. D. R., & Nijholt, A. Towards practical braincomputer interfaces: bridging the gap from research to real-world applications.
Springer Science & Business Media. (2012).
Amiri, S., Rabbi, A., Azinfar, L., & others. A review of P300 SSVEP and hybrid
P300/SSVEP brain-computer interface systems [J]. Brain-Computer Interface
Systems—Recent Progress and Future Prospects. (2013).
Baykara, E., Ruf, C., Fioravanti, C., Käthner, I., Simon, N., Kleih, S., Kübler, A., et al.
Effects of training and motivation on auditory P300 brain–computer interface
performance. Clinical Neurophysiology, 127(1), 379–387. (2016).
Bell, A. J., & Sejnowski, T. J. An information-maximization approach to blind separation and
blind deconvolution. Neural computation, 7(6), 1129–1159. (1995).
Bhatnagar, V., Yede, N., Keram, R. S., & Chaurasiya, R. A modified approach to ensemble
of SVM for P300 based brain computer interface. Advances in Human Machine
Interaction (HMI), 2016 International Conference on (pp. 1–5). IEEE. (2016).

Blankertz, B., Dornhege, G., Krauledat, M., Schröder, M., Williamson, J., Murray-Smith, R.,
& Müller, K.-R. The Berlin Brain-Computer Interface presents the novel mental
typewriter Hex-o-Spell. (2006).
Burg, J. (1975). Maximum Entropy Spectral Analysis.
Cao, L., Xia, B., Maysam, O., Li, J., Xie, H., & Birbaumer, N. A Synchronous Motor Imagery
Based Neural Physiological Paradigm for Brain-Computer Interface Speller. Frontiers
in human neuroscience, 11. (2017).
Castellanos, N. P., & Makarov, V. A. Recovering EEG brain signals: artifact suppression
with wavelet enhanced independent component analysis. Journal of neuroscience
methods, 158(2), 300–312. (2006).
Cecotti, H. Spelling with brain-computer interface-current trends and prospects. Cinquième
conférence plénière française de Neurosciences Computationnelles," Neurocomp’10
(pp. 215–220). (2010).
Cecotti, H. Spelling with non-invasive Brain–Computer Interfaces–Current and future trends.
Journal of Physiology-Paris, 105(1), 106–114. (2011).
Chang, M., Nishikawa, N., Struzik, Z. R., Mori, K., Makino, S., Mandic, D., & Rutkowski, T.
M. Comparison of P300 responses in auditory, visual and audiovisual spatial speller
BCI paradigms. arXiv preprint arXiv:1301.6360. (2013).
D’albis, T., Blatt, R., Tedesco, R., Sbattella, L., & Matteucci, M. A predictive speller
controlled by a brain-computer interface based on motor imagery. ACM Transactions
on Computer-Human Interaction (TOCHI), 19(3), 20. (2012).
Denœux, T. A k-nearest neighbor classification rule based on Dempster-Shafer theory.
Classic works of the Dempster-Shafer theory of belief functions, 737–760. (2008).
Dutta, A., & Sambandan, S. Android based EEG Speller for the Disabled. (2015).

Elsawy, A. S., Eldawlatly, S., Taher, M., & Aly, G. M. Performance analysis of a Principal
Component Analysis ensemble classifier for Emotiv headset P300 spellers.
Engineering in Medicine and Biology Society (EMBC), 2014 36th Annual
International Conference of the IEEE (pp. 5032–5035). IEEE. (2014).
Fazel-Rezai, R. P300-based speller brain-computer interface. INTECH Open Access
Publisher. (2009).
Fazel-Rezai, R., & Ahmad, W. P300-based Brain-Computer Interface paradigm design.
INTECH Open Access Publisher. (2011).
Fazel-Rezai, R., Allison, B. Z., Guger, C., Sellers, E. W., Kleih, S. C., & Kübler, A. P300
brain computer interface: current challenges and emerging trends. Frontiers in
neuroengineering, 5, 14. (2012).
Furdea, A., Halder, S., Krusienski, D., Bross, D., Nijboer, F., Birbaumer, N., & Kübler, A.
An auditory oddball (P300) spelling system for brain-computer interfaces.
Psychophysiology, 46(3), 617–625. (2009).
Gavett, S., Wygant, Z., Amiri, S., & Fazel-Rezai, R. (2012). Reducing human error in P300
speller paradigm for brain-computer interface. Engineering in Medicine and Biology
Society (EMBC), Annual International Conference of the IEEE (pp. 2869–2872).
IEEE. 2012.
Glayan, O. Ç. A Portable and Embedded SSVEP BCI System: emBCI (Tasinablir VE
GÖMÜLÜ BIR SSVEP BBA Sistemi: emBCI). Galatasaray University. (2014).
Guger, C., Daban, S., Sellers, E., Holzner, C., Krausz, G., Carabalona, R., Gramatica, F., et
al. How many people are able to control a P300-based brain–computer interface
(BCI)? Neuroscience letters, 462(1), 94–98. (2009).
Han, J.-S., & Kim, G.-J. A method of unsupervised machine learning based on selforganizing map for BCI. Cluster Computing, 19(2), 979–985. (2016).

Hu, L., Xiao, P., Zhang, Z., Mouraux, A., & Iannetti, G. D. Single-trial time–frequency
analysis of electrocortical signals: Baseline correction and beyond. Neuroimage, 84,
876–887. (2014).
Hwang, H.-J., Kim, S., Choi, S., & Im, C.-H. EEG-based brain-computer interfaces: a
thorough literature survey. International Journal of Human-Computer Interaction,
29(12), 814–826. (2013).
Hwang, H.-J., Lim, J.-H., Jung, Y.-J., Choi, H., Lee, S. W., & Im, C.-H. Development of an
SSVEP-based BCI spelling system adopting a QWERTY-style LED keyboard.
Journal of neuroscience methods, 208(1), 59–65. (2012).
Hyvärinen, A., Karhunen, J., & Oja, E. Independent component analysis (Vol. 46). John
Wiley & Sons. (2004).
Ikegami, S., Takano, K., Kondo, K., Saeki, N., & Kansaku, K. A region-based two-step
P300-based brain–computer interface for patients with amyotrophic lateral sclerosis.
Clinical Neurophysiology, 125(11), 2305–2312. (2014).
Jakkula, V. Tutorial on support vector machine (svm). School of EECS, Washington State
University, 37. (2006).
Kamp, S.-M., Murphy, A. R., & Donchin, E. The component structure of event-related
potentials in the P300 speller paradigm. IEEE Transactions on Neural Systems and
Rehabilitation Engineering, 21(6), 897–907. (2013).
Kaur, E. T., & Singh, B. Brain-Computer Interface: A Review. (2017).
Kick, C., & Volosyak, I. Evaluation of different spelling layouts for SSVEP based BCIs.
Engineering in Medicine and Biology Society (EMBC), 2014 36th Annual
International Conference of the IEEE (pp. 1634–1637). IEEE. (2014).

Kim, D.-W., Hwang, H.-J., Lim, J.-H., Lee, Y.-H., Jung, K.-Y., & Im, C.-H. Classification of
selective attention to auditory stimuli: toward vision-free brain–computer interfacing.
Journal of neuroscience methods, 197(1), 180–185. (2011).
Kim, D.-W., Lee, J.-C., Park, Y.-M., Kim, I.-Y., & Im, C.-H.. Auditory brain-computer
interfaces (BCIs) and their practical applications. Biomedical Engineering Letters,
2(1), 13–17. (2012)
Krigolson, O. E., Williams, C. C., & Colino, F. L. Using Portable EEG to Assess Human
Visual Attention. International Conference on Augmented Cognition (pp. 56–65).
Springer. (2017).
Lee, T.-W., Girolami, M., & Sejnowski, T. J. Independent component analysis using an
extended infomax algorithm for mixed subgaussian and supergaussian sources. Neural
computation, 11(2), 417–441. (1999).
Lee, T.-W., Lewicki, M. S., Girolami, M., & Sejnowski, T. J. Blind source separation of more
sources than mixtures using overcomplete representations. IEEE signal processing
letters, 6(4), 87–90. (1999).
Li, Q., Liu, S., Cao, K., Li, J., Shi, K. Y., & Wu, L. F. A Comparative Study on Single
Display and Region-Based P300 Speller Paradigms for Brain-Computer Interface.
Advanced Materials Research (Vol. 1061, pp. 1153–1157). Trans Tech Publ. (2015).
Lotte, F., Congedo, M., Lécuyer, A., Lamarche, F., & Arnaldi, B. A review of classification
algorithms for EEG-based brain–computer interfaces. Journal of neural engineering,
4(2), R1. (2007).
Mah, W. L. A Steady-State Visual Evoked Potential-Based Brain Computer Interface System
for Patients with Motor Disabilities. UTAR. (2017).
Mainsah, B., Collins, L., Reeves, G., & Throckmorton, C. A performance-based approach to
designing the stimulus presentation paradigm for the P300-based BCI by exploiting

coding theory. Acoustics, Speech and Signal Processing (ICASSP), 2017 IEEE
International Conference on (pp. 3026–3030). IEEE. (2017).
Mora-Cortes, A., Manyakov, N. V., Chumerin, N., & Van Hulle, M. M. Language model
applications to spelling with brain-computer interfaces. Sensors, 14(4), 5967–5993.
(2014).
Mühl, C., Allison, B., Nijholt, A., & Chanel, G. A survey of affective brain computer
interfaces: principles, state-of-the-art, and challenges. Brain-Computer Interfaces,
1(2), 66–84. (2014).
Müller, K.-R., Tangermann, M., Dornhege, G., Krauledat, M., Curio, G., & Blankertz, B.
Machine learning for real-time single-trial EEG-analysis: from brain–computer
interfacing to mental state monitoring. Journal of neuroscience methods, 167(1), 82–
90. (2008).
Nagy, R.-B., POPENTIU, F., & Tarca, C. Survey of Brain Computer Interface Systems.
(2014).
Naz, S., & Bawane, N. G. Recent Trends in BCI based Speller System: A Survey Report.
International Journal of Engineering Science, 8596. (2016).
Nicolas Alonso, L. F., & Gomez Gil, J. Brain computer interfaces, a review. Sensors, 12(2),
1211–1279. (2012).
Okahara, Y., Takano, K., Komori, T., Nagao, M., Iwadate, Y., & Kansaku, K. Operation of a
P300-based brain-computer interface by patients with spinocerebellar ataxia. Clinical
Neurophysiology Practice. (2017).
Pathak, M., & Jayanthy, A. Development of a Real-Time Single Channel Brain–Computer
Interface System for Detection of Drowsiness. Biomedical Engineering: Applications,
Basis and Communications, 29(03), 1750019. (2017).

Pfurtscheller, G., & Neuper, C. Motor imagery and direct brain-computer communication.
Proceedings of the IEEE, 89(7), 1123–1134. (2001).
Postelnicu, C.-C., & Talaba, D. P300-based brain-neuronal computer interaction for spelling
applications. IEEE transactions on biomedical engineering, 60(2), 534–543. (2013).
Ryan, D., Townsend, G., Gates, N., Colwell, K., & Sellers, E. Evaluating Brain-Computer
Interface Performance Using Color in the P300 Checkerboard Speller. Clinical
Neurophysiology. (2017).
Stone, J. V. Independent component analysis. Wiley Online Library. (2004).
Townsend, G., LaPallo, B., Boulay, C., Krusienski, D., Frye, G., Hauser, Ck., Schwartz, N.,
et al. A novel P300-based brain–computer interface stimulus presentation paradigm:
moving beyond rows and columns. Clinical neurophysiology, 121(7), 1109–1120.
(2010).
Valbuena, D., Sugiarto, I., & Gräser, A. Spelling with the Bremen brain-computer interface
and the integrated SSVEP stimulator. na. (2008).
Valeriani, D., Poli, R., & Cinel, C. Enhancement of Group Perception via a Collaborative
Brain–Computer Interface. IEEE Transactions on Biomedical Engineering, 64(6),
1238–1248. (2017).
Williamson, J., Murray-Smith, R., Blankertz, B., Krauledat, M., & Müller, K.-R. Designing
for uncertain, asymmetric control: Interaction design for brain–computer interfaces.
International Journal of Human-Computer Studies, 67(10), 827–841. (2009).
Won, D.-O., Zhang, H. H., Guan, C., & Lee, S.-W. A BCI speller based on SSVEP using
high frequency stimuli design. Systems, Man and Cybernetics (SMC), 2014 IEEE
International Conference on (pp. 1068–1071). IEEE. (2014).

Wu, C.-H., & Lakany, H. Evaluation of the feasibility of a novel distance adaptable steadystate visual evoked potential based brain-computer interface. Neural Engineering
(NER), 2015 7th International IEEE/EMBS Conference on (pp. 57–60). IEEE. (2015).
Wu, W., Gao, X., Hong, B., & Gao, S. Classifying single-trial EEG during motor imagery by
iterative spatio-spectral patterns learning (ISSPL). IEEE Transactions on Biomedical
Engineering, 55(6), 1733–1743. (2008).
Yoon, K., & Kim, K. Multiple kernel learning based on three discriminant features for a P300
speller BCI. Neurocomputing, 237, 133–144. (2017).
(n.d.). Retrieved from http://www.emotiv.com.

‫نموذج التدقيق اإلمالئى الذكي المرتكز على واجهة الحاسوب المخية‬
‫يسرا نبيل عبد هللا (‪ ,)1‬ا‪.‬م‪.‬د‪ /‬صالح محمد رمضان عبد المجيد (‪ , )2‬ا‪.‬م‪.‬د‪ /‬ربيع رمضان (‪ , )3‬ا‪.‬د‪ /‬عفاف عبد اللطيف‬
‫ندا(‪ ,)1‬د‪ /‬مروة على عبدالحميد(‪ , )1‬د‪ /‬ساره عبد القادر(‪)4‬‬
‫(‪ )1‬قسم الفيزياء ‪ -‬كلية البنات‪ -‬جامعة عين شمس‪ -‬القاهرة‪.‬‬
‫(‪ )2‬قسم هندسة النظم والحاسبات ‪ -‬كلية الهندسة ‪ -‬جامعة األزهر‪ -‬القاهرة‪.‬‬
‫(‪ )3‬قسم هندسة الحاسبات ‪ -‬كلية الهندسة ‪ -‬جامعة القاهرة ‪ -‬الجيزة‪.‬‬
‫(‪ )4‬قسم علوم الحاسب ‪-‬كلية الحاسبات والمعلومات ‪ -‬جامعة حلوان ‪ -‬القاهرة‪.‬‬
‫الملخص‪:‬‬
‫تهدف واجهة الحاسوب المخية (‪ )BCI‬الى تحسين كيفية الحياة لجميع البشر‪.‬التدقيق األمالئي هو أحد تطبيقات‬
‫(‪ )BCI‬المستخدمة فى كتابة األرقام أو الحروف أو الكلمات أو الجمل عن طريق‬
‫واجهة الحاسوب المخية‬
‫إطار عمل لل تدقيق ا إلمالئي ل( ‪ )BCI‬يرتكز على‬
‫تسجيل النشاط ال مخي للمستخدم‪.‬وفي هذة الورقة ‪,‬نستعرض‬
‫تحويل النشاط الذهنى ‪.‬يستخدم هذا اإلطار طريقة تحليل المكونات المستقلة للمعالجة المسبقة وطريقة ذاتي‬
‫األرتداد ألستخالص الخصائص‪.‬كما أستخدم أيضا طريقتان فى مرحلة التصنيف هما ألة دعم المتجة و (ك)‬
‫أقرب الجيران‪ .‬واجريت عدة تجارب من قبل اربعة أشخاص باستخدام هذا اإلطار الموصوف ‪,‬وحققت النتائج‬
‫متوسط دقة عالية ‪ %94,38‬لطريقة أقرب الجيران عند(ك= ‪ . )9‬وأظهرت النتاىج ان تحويل النشاط الذهنى‬
‫يمكن ان يستخدم كوسيلة لتطبيقات التدقيق األمالئي‪.‬‬

